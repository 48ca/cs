(function(){var t,e=[].indexOf||function(t){for(var e=0,a=this.length;a>e;e++)if(e in this&&this[e]===t)return e;return-1};window.startDate=new Date("03 Nov 2015 20:00:00 GMT-0600"),window.endDate=new Date("11 Nov 2015 20:00:00 GMT-0600"),t=2500,this.api_call=function(t,e,a){return"POST"===t&&$.cookie("token")&&(a.token=$.cookie("token")),$.ajax({url:e,type:t,data:a,dataType:"json",cache:!1}).fail(function(t,e){return $("#site-message").slideUp("fast","swing",function(){return $("#site-message").html("<div class='alert alert-danger' style='margin:0;'><div class='container'>The EasyCTF API server is currently down. We're working on this to fix this error right away. Follow <a href='http://twitter.com/easyctf' target='_blank' style='color:#fff;'>@easyctf</a> for status updates.</div></div>"),$("#site-message").slideDown("fast","swing")})})},this.display_message=function(a,n,i,s){return window._callback=s,$(a).slideUp("fast","swing",function(){var s;return $(a).html("<div class='alert alert-"+n+"'"+(null!=(s=e.call(a,"#site-message")>=0)?s:{" style='margin:0'":""})+">"+i+"</div>"),$(a).slideDown("fast","swing",function(){return setTimeout(function(){return $(a).slideUp("fast","swing",function(){return $(a).html(""),window._callback?window._callback():void 0})},t)})})},this.display_message_permanent=function(t,a,n,i){return window._callback=i,$(t).slideUp("fast","swing",function(){var i;return $(t).html("<div class='alert alert-"+a+"'"+(null!=(i=e.call(t,"#site-message")>=0)?i:{" style='margin:0'":""})+">"+n+"</div>"),$(t).slideDown("fast","swing",function(){return window._callback?window._callback():void 0})})},this.redirect_if_not_logged_in=function(t){return api_call("GET","/api/user/info",{}).done(function(e){return 0===e.success||e.data&&e.data.logged_in!==!0?location.href="/login":t!==!0||0===e.data.type||new Date>window.startDate?void 0:location.href="/account"})},this.load_navbar=function(){return api_call("GET","/api/user/info",{}).done(function(t){return 0===t.success||t.data&&t.data.logged_in!==!0?$("#nologin-nav").show():($(".account_link").html("<img src='//www.gravatar.com/avatar/"+t.data.email_hash+"?size=20' class='navatar'>"+t.data.username),t.data.team===!1?2===t.data.type?$("#teacher-nav").show():$("#noteam-nav").show():new Date>window.startDate&&t.data.team&&t.data.team.length>0||0===t.data.type?$("#competition-nav").show():2===t.data.type?$("#teacher-nav").show():$("#login-nav").show())})},this.getQueryParams=function(t){var e,a,n;for(t=t.split("+").join(" "),e={},n=void 0,a=/[?&]?([^=]+)=([^&]*)/g;n=a.exec(t);)e[decodeURIComponent(n[1])]=decodeURIComponent(n[2]);return e},this.merge_options=function(t,e){var a,a,n;n={};for(a in t)n[a]=t[a];for(a in e)n[a]=e[a];return n},this.load_site_message=function(){return""},this.load_alt_stylesheet=function(){return $("head").append('<link rel="stylesheet" type="text/css" href="/css/easyctf_halloween.css">'),$("#site-message").html("<div class='alert alert-info' style='margin:0;'><div class='container'>Boo! Happy Halloween!</div></div>"),$("#site-message").slideDown("fast","swing"),setTimeout(function(){return $("#site-message").slideUp("fast","swing",function(){return $("#site-message").html("")})},t)},this.escape_=function(t){return t.replace(/ /g,"&nbsp;")},this.htmlEntities=function(t){return String(t).replace(/&/g,"&amp;").replace(/\s/g,"&nbsp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},$.fn.serializeObject=function(){var t,e;return e={},t=this.serializeArray(),$.each(t,function(){return e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},$(function(){var t;return load_navbar(),load_site_message(),t=new Date,9===t.getMonth()&&11===t.getDate()?load_alt_stylesheet():void 0})}).call(this);